/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
  id 'java'
  id 'maven-publish'
  id 'signing'

  // Delombok, use delomboked sources for javadoc
  id 'io.freefair.lombok' version '6.5.1'

  // Format java code with spotless via prettier-java
  id 'com.diffplug.spotless' version '6.10.0'
}

repositories {
  mavenLocal()
  maven {
    url = uri('https://repo.maven.apache.org/maven2/')
  }
}

dependencies {
  implementation 'com.google.guava:guava:31.1-jre'
  implementation 'io.github.mschout:mail-srs-java:0.9.0'
  implementation 'io.netty:netty-all:4.1.80.Final'
  testImplementation 'junit:junit:4.11'
  testImplementation 'org.junit.jupiter:junit-jupiter:5.9.0'
  testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.9.0'
}

group = 'io.github.mschout'
version = '1.0-SNAPSHOT'
description = 'postfix-srsd-java'

java {
  toolchain {
    languageVersion.set(JavaLanguageVersion.of(11))
  }

  withSourcesJar()
  withJavadocJar()
}

signing {
  useGpgCmd()
  sign publishing.publications
}

// Format java code with spotlessApply task
spotless {
  java {
    prettier(['prettier': '2.0.5', 'prettier-plugin-java': '0.8.0'])
        .config([
            'parser'       : 'java',
            'tabWidth'     : 2,
            'printWidth'   : 140,
            'trailingComma': 'none',
            'useTabs'      : false
        ])
    // licenseHeader '/* (C) $YEAR */'
  }
}

publishing {
  publications {
    maven(MavenPublication) {
      from(components.java)
    }
  }
}

tasks.withType(JavaCompile) {
  options.encoding = 'UTF-8'
}

// vim: ts=2 sw=2